"use strict";var types=require("types.js"),RegExpValidations=function(t){this.setErrorHandler(t),this.validations={}};RegExpValidations.prototype.setErrorHandler=function(t){return this.errorHandler=types.forceFunction(t),this},RegExpValidations.prototype.hasKey=function(t){return this.validations.hasOwnProperty(t)},RegExpValidations.prototype.addOne=function(t,e){return types.notString(t)?(this.errorHandler("key: ",t,"is not of type string, cannot add validation!"),!1):this.hasKey(t)?(this.errorHandler("key: ",t,"already exists with regexp:",this.validations[t],"cannot add!"),!1):(this.validations[t]=types.notRegExp(e)?e:types.forceRegExp(e),!0)},RegExpValidations.prototype.add=function(t,e){var i=!1;if(types.isObject(t)){for(var r in t)this.addOne(r,t[r])||(i=!0);return!i}return this.addOne(t,e)},RegExpValidations.prototype.validateOne=function(t,e){if(!this.hasKey(t))return this.errorHandler("cannot validate non-existing key:",t),null;var i=this.validations[t],r=types.isString(e)?'"'+e+'"':e;if(types.notRegExp(i)){if(i===e)return!0}else if(i.test(e))return!0;return this.errorHandler("value: "+r+" did not pass "+t+"!",{key:t,value:e,regexp:this.validations[t]}),!1},RegExpValidations.prototype.validate=function(t,e){if(types.notArray(t))return this.validateOne(t,e);var i=!0;for(var r in t){var n=t[r];if(types.notObject(n))return this.errorHandler("invalid or non-object type encountered in validations!"),null;var a=Object.keys(n)[0];if(!this.validateOne(a,n[a])&&(i=!1,!e))break}return i},module.exports=RegExpValidations;